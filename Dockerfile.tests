ARG runtime_img="golang:1.13.5-alpine"

FROM $runtime_img
ENV CGO_ENABLED=0
RUN apk add --update --no-cache make

WORKDIR /go/src/github.com/chadgrant/dynamodb-go-sample

COPY go.mod go.sum ./
RUN go mod download

COPY Makefile main.go ./ 
COPY store ./store/

CMD ["go","test","-v","./..."]